<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">

  <title>Slime.Surf: Wavy</title>

  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="./css/touch-pad.css">
  <link rel="icon" type="image/png" href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/snake_1f40d.png"/>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r123/three.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src='./node_modules/three/examples/jsm/utils/threex.domevents.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.70/Tone.js"></script>
  <script src="./js/movement-pad.js"></script>
  <script src="./js/VRKeyboard.js"></script>
  <script src="./js/rotation-pad.js"></script>
  <script src="./js/touch-controls.js"></script>
  <script src="./js/obj.js"></script>
  <script src="./js/mtl.js"></script>
  <script src="./js/physi.js"></script>
  <script src="./js/perlin_noise.js"></script>

  <section id="loading-screen">
    <div id="blocker">
      <div id="loader">
        <div id="loadText">
          <span style="font-size:40px">
          S<br /> 
          L<br /> 
          A<br /> 
          T<br /> 
          T<br /> 
          </span>
        </div>
        <script>
          var i = true
          var loadAnimation = document.getElementById( 'loading-screen' )
          var resourcesLoaded = false;
          var loadingManager = null;
          var instructionsScreen = null;
          loadingManager = new THREE.LoadingManager( () => {
            let loadingScreen = document.getdElementById( 'loading-screen' )
            let instructionsScreen = document.getdElementById( 'instructions' )
          })
          loadingManager.onProgress = function(item, loaded, total){
            let loadingScreen = document.getElementById( 'loading-screen' );
            let instructionsScreen = document.getElementById( 'instructions' );
            }
          loadingManager.onLoad = function(){
            document.getElementById('loading-screen').id = 'fade-out'
            resourcesLoaded = true;
            let instructionsScreen = document.getElementById( 'instructions' );
            instructionsScreen.style.visibility = 'visible';
            ;
          };
          window.addEventListener ("load", function() {
          loader.style.display = 'none';
          });
        </script>
        </div>
          <div id="instructions">
            <span style="font-size:36px">THE TREE OF SLIME</span><br />
            <span style="font-size:22px">üêç A 3D YSL Soundboard üåä</span><br />
            <span style="font-size:15px">Created by Declan Murphy <a href = "https://twitter.com/daeclan" target="_blank">(@daeclan)</a></span><br /><br />
            <span style="font-size:10px">Click or Tap Anywhere To Dismiss</span><br /> <br />
            <span style="font-size:27px">Instructions:</span></br>
            Move Around: WAXD or ARROWS<br/>
            Look Around: MOUSE<br/>
            Play/Pause Loop: CLICK BLACK ORBS<br/>
            Soundboard: CLICK RED ORBS or KEYS 0-9<br/>
            Pause/Work Cited: SPACE<br/><br />
            <span style="font-size:10px">[Unlock A Secret Loop With The Correct Key Presses]
              <br />
            Type EZ To Make Soundboard More Accessible</span>
            <div id="pause" style="display: none;">
              <span style="font-size:25px">
                FOLLOW DAECLAN
              </span>
              <br />
              <span style="font-size:18px">
                <a href = "https://twitter.com/daeclan" target="_blank">Twitter</a>
                <br />
                <a href = "https://instagram.com/daeclan" target="_blank">Instagram</a>
              </span>
                <br />
                <br />
            
              <span style="font-size:11px">
                WORK CITED¬†
                <br />
                <a href = "https://soundimage.org/looping-music/" target="_blank">Initial Loop:Cyber Dream Loop</a> by Eric Matyas
                <br />
                <a href = "https://sketchfab.com/3d-models/pedestal-bbc51dca899346b6aa879c19bce82ebe
                " target="_blank">Pedestal 3D Object </a> by elouisetrewartha
                <br />
                <a href = "https://www.cgtrader.com/free-3d-models/animals/reptile/snake-by-swp" target="_blank">Snake 3D Object</a> by¬†SWP
                <br />
                <a href = "https://www.cgtrader.com/free-3d-models/plant/conifer/tree-with-no-leaves" target="_blank">Tree 3D Object</a> by¬†10DollarsAnimation 
                <br />
                <a href = "https://www.cgtrader.com/free-3d-models/animals/insect/low-poly-spider-model" target="_blank">Spider Object</a> by lyrog 
                <br />
                <a href = "https://sketchfab.com/3d-models/magical-mushroom-blue-6f5da980f1534fb499aa157ab26a15d9" target="_blank">Mushroom¬†Object</a> by MA3D 
                <br />
                <a href = "http://stemkoski.github.io/Three.js/Particles.html" target="_blank">Particle Physics (ThreeJS)</a> by Lee Stemkoski 
                <br />
                Music courtesy of YSL Records and 300 Entertainment
              </span>

        </div>
      </div>
    </div>
  </section>
  
  <script type="module">
    import { FirstPersonControls } from './node_modules/three/examples/jsm/controls/FirstPersonControls.js';
    import { GLTFLoader } from './node_modules/three/examples/jsm/loaders/GLTFLoader.js';
    Physijs.scripts.worker = './js/physijs_worker.js'
    Physijs.scripts.ammo = 'https://chandlerprall.github.io/Physijs/examples/js/ammo.js';

    // set up three.js scene, clock, camera, and webGL renderer

    var scene = new Physijs.Scene;
    var sceneObject = scene
    scene.setGravity(new THREE.Vector3(0,-0.001,0))

    var clock = new THREE.Clock();
    var look = new THREE.Vector3(0, -100, -63)

    var camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 100000 );
    camera.lookAt(look)
    camera.position.set(0,200,4998)
 
    var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setClearColor("#007a33");
    renderer.setSize(window.innerWidth,window.innerHeight);
    document.body.appendChild(renderer.domElement); 

    // set up controls by checking if user is mobile or desktop

    var mobileConfirm = null
    var container = $('body');
    var intersected 
    
    function isMobileDevice() {
      return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
    };

    function disableScroll() { 
      document.body.classList.add("stop-scrolling"); 
    }

    if(isMobileDevice()){	
      var options = {
			speedFactor: 0.5,
			delta: 1,
			rotationFactor: 0.002,
			maxPitch: 55,
			hitTest: true,
			hitTestDistance: 40
		};
      var controls = new TouchControls(container.parent(), camera, renderer.domElement);
      mobileConfirm = true;
      controls.setPosition(0,0,0)
      camera.position.set(0,200,4998)
      camera.lookAt(0,4000,-2000) 
      controls.object.rotation.order = 'ZYX'
      controls.addToScene(scene);
      disableScroll();
      }else{
      var controls = new FirstPersonControls( camera, renderer.domElement );
      controls.movementSpeed = 1500;
      controls.lookSpeed = 0.6;
      controls.target = new THREE.Vector3(0, 0, 0)
    }

    window.addEventListener('mouseover', () => {
      controls.lookSpeed = 0.2
    })

    window.addEventListener('mouseout', () => {
      controls.lookSpeed = 0.0001
    })
    
    if(isMobileDevice()){
      controls.maxPolarAngle = Math.PI / 2}

    // insert blocker screen / instructions

    const blocker = document.getElementById( 'blocker' );
    const instructions = document.getElementById( 'instructions' );
    const pause = document.getElementById( 'pause' );
    var firstClick = false

    instructions.addEventListener( 'click', function () {
      if(!firstClick){
      instructions.style.visibility = 'hidden';
      blocker.style.visibility = 'hidden';
      Tone.start();
      loopSwitch4();
      firstClick = true
      }
    }, false );

    // set up window resize event
        
    window.addEventListener('resize', () => {
      renderer.setSize(window.innerWidth,window.innerHeight);
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.outputEncoding = THREE.sRGBEncoding;
      controls.handleResize();
    })

    // add lights

    var light = new THREE.HemisphereLight( 0xFFFFFF, 0xffffff, 0.09 )
    light.position.set(0,15,0);
    scene.add(light);

    var light = new THREE.PointLight(0xffff00, 2, 500)
    light.position.set(0,2000,500);
    scene.add(light);

    var light = new THREE.PointLight(0x0afb02, 2, 420)
    light.position.set(0,550,3700);
    scene.add(light);

    var light = new THREE.PointLight(0x0afb02, 300, 420)
    light.position.set(0,2050,-3700);
    scene.add(light);

    var light = new THREE.PointLight(0x5cd5fd, 0.8, 300)
    light.position.set(0,400,-3500);
    scene.add(light);

    var light = new THREE.PointLight(0x5cd5fd, 0.8, 300)
    light.position.set(0,400,-3500);
    scene.add(light);
    
    var light = new THREE.SpotLight(0xFFFFFF, 0.75, 5)
    light.position.set(0,3000,35);
    scene.add(light);

    var light = new THREE.SpotLight(0xFF0000, 0.75, 50)
    light.position.set(0,10000,35);
    scene.add(light);

    const spotLight = new THREE.SpotLight( 0x0afb02 );
    spotLight.position.set( 0, 1000, -5000 );

    spotLight.castShadow = true;

    spotLight.shadow.mapSize.width = 1024;
    spotLight.shadow.mapSize.height = 1024;

    spotLight.shadow.camera.near = 500;
    spotLight.shadow.camera.far = 4000;
    spotLight.shadow.camera.fov = 30;

    scene.add( spotLight );

    // create room environment

    const texture = new THREE.TextureLoader(loadingManager).load( './assets/3D/SL2.jpg' );
    
    var roomBox = new THREE.BoxBufferGeometry(10000,10000,10000, 8);
    const roomMaterial = new THREE.MeshBasicMaterial({map: texture, side: THREE.DoubleSide });
    var roomMesh = new Physijs.BoxMesh(roomBox, roomMaterial, 0);
    roomMesh.rotateZ( - Math.PI / 2);
    roomMesh.scale.set = -1;
    roomMesh.rotation.z = - Math.PI * 2.0;
    roomMesh.position.set(0, 4800, 0)
    scene.add(roomMesh);

    scene.fog = new THREE.Fog( 0x4ff904, 0, 17000 );

    const snow = new THREE.TextureLoader(loadingManager).load('./assets/3D/snow.jpg');
    let value1 = 6

    function createTerrain(){
    var ground_material = Physijs.createMaterial(
      new THREE.MeshLambertMaterial({
        map: snow
      }),
      0.1,
      10
    )

    var ground_geometry = new THREE.PlaneGeometry(10000,10000,100,100)
    
    for (var i=0; i<ground_geometry.vertices.length; i++){
      var vertex = ground_geometry.vertices[i];
      value1 = noise.simplex2(vertex.x/0.1,vertex.y/10);
      vertex.z = Math.abs(value1)*33;
      
    }
    ground_geometry.computeFaceNormals();
    ground_geometry.computeVertexNormals();

    var ground  = new Physijs.HeightfieldMesh(
      ground_geometry,
      ground_material,
      0,
      100,
      100
    )
    ground.position.y = -62.5
    ground.scale.set(50,5,5)
    ground.rotation.x = Math.PI / -2 ;
    return ground
    }
    scene.add(createTerrain())

  // load VR keyboard

  var vrKeyboard = new VRKeyboard(scene, camera, renderer)
  vrKeyboard.position.set(0,250,3665)
  vrKeyboard.scale.set(0.6,0.6,0.6)
  vrKeyboard.keyColor="#000000";
  vrKeyboard.labelColor="#7cfc00";
  vrKeyboard.borderColor="#32cd32";
  vrKeyboard.keyDownColor="#008000";
  vrKeyboard.labelDownColor="#ffffff";
  vrKeyboard.borderDownColor="#32cd32";
  vrKeyboard.borderRadius=0

  // load statue pillars

    const loader = new GLTFLoader(loadingManager);

    loader.load(
      './assets/3D/scene.gltf',
      function ( gltf ) {
        scene.add( gltf.scene );
        gltf.scene.position.set(-128,-100,3500)
        gltf.scene.scale.set(50,50,50)
        gltf.scene.color = "#000000"
    })

    loader.load(
      './assets/3D/scene.gltf',
      function ( gltf ) {
        scene.add( gltf.scene );
        gltf.scene.position.set(128,-100,3500)
        gltf.scene.scale.set(50,50,50)
        gltf.scene.color = "#000000"
    })

  // load YSL statues   

    var young = new THREE.Object3D(loadingManager)
    var stoner = new THREE.Object3D(loadingManager);
    var life = new THREE.Object3D(loadingManager);
    
    scene.add( young )
    scene.add( stoner )
    scene.add( life )

    var yOBJFile = './assets/3D/Y.obj';
    var yMTLFile = './assets/3D/Y.mtl';
    var JPGFile = './assets/3D/snow.jpg';

    var yMTL = new THREE.MTLLoader(loadingManager)
    yMTL.load(yMTLFile, function (materials) {
        materials.preload();
        var yOBJ = new THREE.OBJLoader(loadingManager)
            .setMaterials(materials)
            .load(yOBJFile, function (object) {
              object.position.z = 3500;
              object.position.y = 500;
              object.position.x = -200;
              object.scale.set(1700,1700,1700)
              object.rotation.z = THREE.Math.radToDeg(1.1);
                var texture = new THREE.TextureLoader().load(JPGFile);

                object.traverse(function (child) {  
                    if (child instanceof THREE.Mesh) {
                        child.material.map = texture;
                    }
                });
                young = object
                scene.add(object);
            });
    });

    var sOBJFile = './assets/3D/S.obj';
    var sMTLFile = './assets/3D/S.mtl';

    var sMTL = new THREE.MTLLoader(loadingManager)
    sMTL.load(sMTLFile, function (materials) {
        materials.preload();
        var sOBJ = new THREE.OBJLoader(loadingManager)
            .setMaterials(materials)
            .load(sOBJFile, function (object) {
              object.position.z = 3500;
              object.position.y = 480;
              object.position.x = 45;
              object.rotation.z = THREE.Math.radToDeg(0.99);
              object.scale.set(1700,1700,1700)
              object.rotation.z = THREE.Math.radToDeg(1.1);
                var texture = new THREE.TextureLoader().load(JPGFile);
                object.traverse(function (child) {  
                    if (child instanceof THREE.Mesh) {
                        child.material.map = texture;
                    }
                });
                stoner = object
                scene.add(object);
            });
    });

    var lOBJFile = './assets/3D/L.obj';
    var lMTLFile = './assets/3D/L.mtl';

    var lMTL = new THREE.MTLLoader(loadingManager)
    lMTL.load(lMTLFile, function (materials) {
        materials.preload();
        var lOBJ = new THREE.OBJLoader(loadingManager)
            .setMaterials(materials)
            .load(lOBJFile, function (object) {
              object.position.z = 3500;
              object.position.y = 480;
              object.position.x = 270;
              object.scale.set(1700,1700,1700)
              object.rotation.z = THREE.Math.radToDeg(0.98911);
                life = object
                scene.add(object);
              });
    });

    // add YSL stele

    var mtlLoader = new THREE.MTLLoader();
    mtlLoader.load('./assets/3D/ysl.mtl', function (materials) {
      materials.preload();
      var objLoader = new THREE.OBJLoader();
      objLoader.setMaterials(materials);
      objLoader.load('./assets/3D/ysl.obj', function (object) {
        scene.add(object);
        object.scale.set(7,7,7);
        object.position.z = -3500;
        object.position.y = -10;
        object.rotation.x = 0;
      });
    });

    // add particles

    var particleTexture = new THREE.TextureLoader(loadingManager).load( './assets/3D/vvs.png' );
    particleGroup = new THREE.Object3D();
    particleAttributes = { startSize: [], startPosition: [], randomness: [] };

    var totalParticles = 227;
    var radiusRange = 2000;
    for( var i = 0; i < totalParticles; i++ ) 
    {
        var spriteMaterial = new THREE.SpriteMaterial( { map: particleTexture, color: 0xffffff } );
      
      var sprite = new THREE.Sprite( spriteMaterial );
      sprite.scale.set( 75, 75, 1.0 ); 
      sprite.position.set( Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5 )*2;
      sprite.position.setLength( radiusRange * (Math.random() * 0.1 + 0.9) );
      sprite.material.color.setHex( "#ff0000" ); 
      sprite.material.blending = THREE.AdditiveBlending
      particleGroup.add( sprite );
      particleAttributes.startPosition.push( sprite.position.clone() );
      particleAttributes.randomness.push( Math.random() );
    }
    particleGroup.position.y = 500;
    particleGroup.position.z = 0;
    particleGroup.position.x = 3000;
    scene.add( particleGroup );

    var particleGroup, particleAttributes;

    function particleUpdate(){
    var time = 4 * clock.getElapsedTime();
    for ( var c = 0; c < particleGroup.children.length; c ++ ) 
    {
      var sprite = particleGroup.children[ c ];

      var wiggleScale = 2;
      sprite.position.x += wiggleScale * (Math.random() - 0.5);
      sprite.position.y += wiggleScale * (Math.random() - 0.5);
      sprite.position.z += wiggleScale * (Math.random() - 0.5);

      var a = particleAttributes.randomness[c] + 1;
      var pulseFactor = Math.sin(a * time) * 0.1 + 0.05;
      sprite.position.x = particleAttributes.startPosition[c].x * pulseFactor;
      sprite.position.y = particleAttributes.startPosition[c].y * pulseFactor;
      sprite.position.z = particleAttributes.startPosition[c].z * pulseFactor;	
    }

    particleGroup.rotation.y = time * 0.75;
    particleGroup.rotation.z = time * 1.0;
    }

    var particleTexture2 = new THREE.TextureLoader(loadingManager).load( './assets/3D/vvs.png' );
    particleGroup2 = new THREE.Object3D();
    particleAttributes2 = { startSize: [], startPosition: [], randomness: [] };

    for( var i = 0; i < totalParticles; i++ ) 
    {
        var spriteMaterial = new THREE.SpriteMaterial( { map: particleTexture, color: 0xff0000 } );
      
      var sprite = new THREE.Sprite( spriteMaterial );
      sprite.scale.set( 75, 75, 1.0 ); 
      sprite.position.set( Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5 )*2;
      sprite.position.setLength( radiusRange * (Math.random() * 0.1 + 0.9) );
      sprite.material.color.setHex( "#ff0000" ); 
      sprite.material.blending = THREE.AdditiveBlending
      particleGroup2.add( sprite );
      particleAttributes2.startPosition.push( sprite.position.clone() );
      particleAttributes2.randomness.push( Math.random() );
    }
    particleGroup2.position.y = 500;
    particleGroup2.position.z = 0;
    particleGroup2.position.x = -3000;
    scene.add( particleGroup2 );

    var particleGroup2, particleAttributes2;

    function particleUpdate2(){
    var time = 4 * clock.getElapsedTime();
    for ( var c = 0; c < particleGroup2.children.length; c ++ ) 
    {
      var sprite = particleGroup2.children[ c ];

      var wiggleScale = 2;
      sprite.position.x += wiggleScale * (Math.random() - 0.5);
      sprite.position.y += wiggleScale * (Math.random() - 0.5);
      sprite.position.z += wiggleScale * (Math.random() - 0.5);

      var a = particleAttributes2.randomness[c] + 1;
      var pulseFactor = Math.sin(a * time) * 0.1 + 0.05;
      sprite.position.x = particleAttributes2.startPosition[c].x * pulseFactor;
      sprite.position.y = particleAttributes2.startPosition[c].y * pulseFactor;
      sprite.position.z = particleAttributes2.startPosition[c].z * pulseFactor;	
    }

    particleGroup2.rotation.y = time * 0.75;
    particleGroup2.rotation.z = time * 1.0;
    }

    //add tree

    var treeMat = new THREE.MeshBasicMaterial({color: 0x000000});
    var treeOBJLoader = new THREE.OBJLoader(loadingManager);
    treeOBJLoader.setPath( './assets/3D/');
    treeOBJLoader.load( 'Tree.obj', function ( object ) {
        object.traverse(function(child) {
            if (child instanceof THREE.Mesh){
                child.material = basic;
            }
        });
        scene.add( object );
        object.position.z = -0;
        object.position.y = 0;
        object.position.x = -400;
        object.rotation.x = 0
        object.scale.set(700,700,700)
    });
    
    //add mushroom

    var mushroom = new THREE.Object3D(loadingManager)

    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(-600,100,-3500)
        z.scene.scale.set(1,1,1)
        z.scene.color = "#000000"
        mushroom = z.scene
    })

    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(600,50,-3500)
        z.scene.rotation.y = 300
        z.scene.scale.set(0.5,0.5,0.5)
        z.scene.color = "#000000"
        mushroom = z.scene
    })

    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(-770,50,-3633)
        z.scene.rotation.y = 300
        z.scene.scale.set(0.5,0.5,0.5)
        z.scene.color = "#000000"
        mushroom = z.scene
    })
    
    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(400,100,-3300)
        z.scene.rotation.y = 600
        z.scene.scale.set(1.5,1.5,1.5)
        z.scene.color = "#000000"
        mushroom = z.scene
    })
 
    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(-660,200,-4000)
        z.scene.rotation.y = 190
        z.scene.scale.set(3.5,3.5,3.5)
        z.scene.color = "#000000"
        mushroom = z.scene
    })

    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(0,100,-3500)
        z.scene.rotation.y = 2340
        z.scene.scale.set(2.5,4.5,1.5)
        z.scene.color = "#000000"
        mushroom = z.scene
    })

    loader.load(
      './assets/3D/mush.gltf',
      function ( z ) {
        scene.add( z.scene );
        z.scene.position.set(800,200,-3700)
        z.scene.rotation.y = 270
        z.scene.scale.set(2.5,2.5,2.5)
        z.scene.color = "#000000"
        mushroom = z.scene
    })
  
    //add snakes

    var snake1 = new THREE.Object3D(loadingManager)
    var snake2 = new THREE.Object3D(loadingManager);

    var snexture = new THREE.TextureLoader(loadingManager).load('./assets/3D/snow.jpg');
    var basic = new THREE.MeshBasicMaterial({color: 0x000000});
    var objLoader = new THREE.OBJLoader(loadingManager);
    objLoader.setPath( './assets/3D/');
    objLoader.load( 'Snake_by_Swp.obj', function ( object ) {
        object.traverse(function(child) {
            if (child instanceof THREE.Mesh){
                child.material = basic;
            }
        });
        scene.add( object );
        object.position.z = 33;
        object.position.y = 10;
        object.position.x = 3000;
        object.rotation.z = 0;
        object.scale.set(50,50,50)
        snake1 = object
    });

    var basic2 = new THREE.MeshBasicMaterial({color: 0x000000});
    var objLoader2 = new THREE.OBJLoader(loadingManager);
    objLoader2.setPath( './assets/3D/');
    objLoader2.load( 'Snake_by_Swp.obj', function ( object ) {
        object.traverse(function(child) {
            if (child instanceof THREE.Mesh){
                child.material = basic;
            }
        });
        scene.add( object );
        object.position.z = 33;
        object.position.y = 10;
        object.position.x = -3000;
        object.rotation.z = 0;
        object.scale.set(50,50,50)
        snake2 = object
    });

    // add spiders

    var spider = new THREE.Object3D(loadingManager)

    var spiderMesh = new THREE.MeshBasicMaterial({color: 0x000000});
    var objLoader3 = new THREE.OBJLoader(loadingManager);
    objLoader3.setPath( './assets/3D/');
    objLoader3.load( 'Spider.obj', function ( object ) {
        object.traverse(function(child) {
            if (child instanceof THREE.Mesh){
                child.material = spiderMesh;
            }
        });
        scene.add( object );
        object.position.z = 200;
        object.position.y = 10100;
        object.position.x = -500;
        object.rotation.z = (Math.PI)
        object.scale.set(500,500,500)
        spider = object
    });

    var spider2 = new THREE.Object3D(loadingManager)

    var spiderMesh2 = new THREE.MeshBasicMaterial({color: 0x000000});
    var objLoader3 = new THREE.OBJLoader(loadingManager);
    objLoader3.setPath( './assets/3D/');
    objLoader3.load( 'Spider.obj', function ( object ) {
        object.traverse(function(child) {
            if (child instanceof THREE.Mesh){
                child.material = spiderMesh2;
            }
        });
        scene.add( object );
        object.position.z = 0;
        object.position.y = 210;
        object.position.x = 0;
        object.scale.set(5,5,5)
        spider2 = object
    });

    // create tree fruits

    const geometry = new THREE.SphereGeometry(50, 50, 50)
    const material = new THREE.MeshBasicMaterial({color: '#8b0000'})
    const mercury = new THREE.Mesh(geometry, material)
    mercury.position.set(-850,3039,900)
    scene.add(mercury)

    const geometry2 = new THREE.SphereGeometry(70, 70, 70)
    const material2 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const moon = new THREE.Mesh(geometry2, material2)
    moon.position.set(-1200,2930,780)
    scene.add(moon)

    const geometry3 = new THREE.SphereGeometry(48, 48, 48)
    const material3 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const mars = new THREE.Mesh(geometry3, material3)
    mars.position.set(-1590,3005,790)
    scene.add(mars)

    const geometry7 = new THREE.SphereGeometry(50, 50, 50)
    const material7 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const saturn = new THREE.Mesh(geometry7, material7)
    saturn.position.set(-1080,4000,-1000)
    scene.add(saturn)
    
    const geometry5 = new THREE.SphereGeometry(70, 70, 70)
    const material5 = new THREE.MeshBasicMaterial({color: '#8b0000'})
    const neptune = new THREE.Mesh(geometry5, material5)
    neptune.position.set(660,3400,790)
    scene.add(neptune)

    const geometry4 = new THREE.SphereGeometry(100,100,100)
    const material4 = new THREE.MeshBasicMaterial({color: "#000000"})
    const sun = new THREE.Mesh(geometry4, material4)
    sun.position.set(3000,500,0)
    scene.add(sun)

    const geometry23 = new THREE.SphereGeometry(300,300,300)
    const material23 = new THREE.MeshBasicMaterial({color: "#000000"})
    const xanthar = new THREE.Mesh(geometry23, material23)
    xanthar.position.set(0,2000,-3600)
    scene.add(xanthar)

    const geometry6 = new THREE.SphereGeometry(65, 65, 65)
    const material6 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const uranus = new THREE.Mesh(geometry6, material6)
    uranus.position.set(420,3050,650)
    scene.add(uranus)
    
    const geometry8 = new THREE.SphereGeometry(45, 45, 45)
    const material8 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const pluto = new THREE.Mesh(geometry8, material8)
    pluto.position.set(0,2890,570)
    scene.add(pluto)

    const geometry9 = new THREE.SphereGeometry(65, 65, 65)
    const material9 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const jupiter = new THREE.Mesh(geometry9, material9)
    jupiter.position.set(-1950,4200,200)
    scene.add(jupiter)

    const geometry21 = new THREE.SphereGeometry(80, 80, 80)
    const material21 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const venus = new THREE.Mesh(geometry21, material21)
    venus.position.set(-1970,4450,-1250)
    scene.add(venus)

    const geometry20 = new THREE.SphereGeometry(65, 65, 65)
    const material10 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const venus2 = new THREE.Mesh(geometry20, material10)
    venus2.position.set(-410,3000,300)
    scene.add(venus2)

    const geometry14 = new THREE.SphereGeometry(100,100,100)
    const material14 = new THREE.MeshBasicMaterial({color: "#000000"})
    const sun2 = new THREE.Mesh(geometry14, material14)
    sun2.position.set(-3000,500,0)
    scene.add(sun2)
    
    const geometry11 = new THREE.SphereGeometry(65, 65, 65)
    const material11 = new THREE.MeshBasicMaterial({color: '#8b0000'})
    const mercury2 = new THREE.Mesh(geometry11, material11)
    mercury2.position.set(1220,2930,0)
    scene.add(mercury2)

    const geometry12 = new THREE.SphereGeometry(40, 40, 40)
    const material12 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const moon2 = new THREE.Mesh(geometry12, material12)
    moon2.position.set(0,3100,-750)
    scene.add(moon2)

    const geometry13 = new THREE.SphereGeometry(65, 65, 65)
    const material13 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const mars2 = new THREE.Mesh(geometry13, material13)
    mars2.position.set(-1400,3580,-560)
    scene.add(mars2)

    const geometry15 = new THREE.SphereGeometry(65, 65, 65)
    const material15 = new THREE.MeshBasicMaterial({color: '#8b0000'})
    const neptune2 = new THREE.Mesh(geometry15, material15)
    neptune2.position.set(-180,3700,785)
    scene.add(neptune2)

    const geometry16 = new THREE.SphereGeometry(65, 65, 65)
    const material16 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const uranus2 = new THREE.Mesh(geometry16, material16)
    uranus2.position.set(-730,4200,-1340)
    scene.add(uranus2)

    const geometry18 = new THREE.SphereGeometry(40, 40, 40)
    const material18 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const pluto2 = new THREE.Mesh(geometry18, material18)
    pluto2.position.set(1120,4330,-1550)
    scene.add(pluto2)
    
    const geometry19 = new THREE.SphereGeometry(65, 65, 65)
    const material19 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const jupiter2 = new THREE.Mesh(geometry19, material19)
    jupiter2.position.set(1250,4450,-950)
    scene.add(jupiter2)
    
    const geometry17 = new THREE.SphereGeometry(65, 65, 65)
    const material17 = new THREE.MeshBasicMaterial({color: "#8b0000"})
    const saturn2 = new THREE.Mesh(geometry17, material17)
    saturn2.position.set(1000,10,250)
    scene.add(saturn2)

    // create mobile key presses

    const geometry33 = new THREE.BoxGeometry(40, 30, 5)
    const material33 = new THREE.MeshBasicMaterial({color: "#000000"})
    const yButton = new THREE.Mesh(geometry33, material33)
    yButton.position.set(24,314,3662)
    scene.add(yButton)

    const geometry34 = new THREE.BoxGeometry(40, 30, 5)
    const material34 = new THREE.MeshBasicMaterial({color: "#000000"})
    const sButton = new THREE.Mesh(geometry34, material34)
    sButton.position.set(-144,271,3662)
    scene.add(sButton)

    const geometry35 = new THREE.BoxGeometry(40, 30, 5)
    const material35 = new THREE.MeshBasicMaterial({color: "#000000"})
    const lButton = new THREE.Mesh(geometry35, material35)
    lButton.position.set(192,271,3662)
    scene.add(lButton)

    const geometry36 = new THREE.BoxGeometry(40, 30, 5)
    const material36 = new THREE.MeshBasicMaterial({color: "#000000"})
    const eButton = new THREE.Mesh(geometry36, material36)
    eButton.position.set(-120,314,3662)
    scene.add(eButton)

    const geometry37 = new THREE.BoxGeometry(40, 30, 5)
    const material37 = new THREE.MeshBasicMaterial({color: "#000000"})
    const zButton = new THREE.Mesh(geometry37, material37)
    zButton.position.set(-144,230,3662)
    scene.add(zButton)

    // create/load tone.js sounds

    const backsound = new Tone.Player("./assets/MP3/trial46.aac").toDestination();
    Tone.loaded().then(() => {
      Tone.context.resume();
    });

    const backsound2 = new Tone.Player("./assets/MP3/surf.mp3").toDestination();
    Tone.loaded().then(() => {
      Tone.context.resume();
    });

    const backsound3 = new Tone.Player("./assets/MP3/treasure.mp3").toDestination();
    Tone.loaded().then(() => {
      Tone.context.resume();
    });

    const backsound4 = new Tone.Player("./assets/MP3/Cyber-Dream-Loop.mp3").toDestination();
    Tone.loaded().then(() => {
      Tone.context.resume();
    });

    const backsound5 = new Tone.Player("./assets/MP3/GFU.mp3").toDestination();
    Tone.loaded().then(() => {
      Tone.context.resume();
    });
    
    const adlib = new Tone.Player("./assets/MP3/fed.mp3").toDestination();
    const adlib2 = new Tone.Player("./assets/MP3/grat.mp3").toDestination();
    const adlib3 = new Tone.Player("./assets/MP3/wavy.mp3").toDestination();
    const adlib4 = new Tone.Player("./assets/MP3/YSLUber.mp3").toDestination();
    const adlib5 = new Tone.Player("./assets/MP3/ohOKAY.mp3").toDestination();
    const adlib6 = new Tone.Player("./assets/MP3/pshPSH.mp3").toDestination();
    const adlib7 = new Tone.Player("./assets/MP3/coolRack.mp3").toDestination();
    const adlib8 = new Tone.Player("./assets/MP3/slimeSLIME.mp3").toDestination();
    const adlib9 = new Tone.Player("./assets/MP3/bling.mp3").toDestination();
    const adlib10 = new Tone.Player("./assets/MP3/git.mp3").toDestination();
    const adlib11 = new Tone.Player("./assets/MP3/eww.mp3").toDestination();
    const adlib12 = new Tone.Player("./assets/MP3/slimeLove.mp3").toDestination();
    const adlib13 = new Tone.Player("./assets/MP3/skreet.mp3").toDestination();
    const adlib14 = new Tone.Player("./assets/MP3/woo.mp3").toDestination();
    const adlib15 = new Tone.Player("./assets/MP3/skirt.mp3").toDestination();
    const adlib16 = new Tone.Player("./assets/MP3/uhuh.mp3").toDestination();
    const adlib17 = new Tone.Player("./assets/MP3/bad.mp3").toDestination();
    const adlib18 = new Tone.Player("./assets/MP3/uhyuh.mp3").toDestination();

    function loopSwitch() {
      backsound.volume.value = -5;
        if (backsound.state == "started") {
            // Use the Tone.Transport to pause audio
            backsound.loop = false
            backsound.stop();
        } else if (backsound.state == "stopped") {
            // Use the Tone.Transport to start again
            backsound2.stop();
            backsound3.stop();
            backsound4.stop();
            backsound5.stop();
            backsound.loop = true
            backsound.start();
    }}

    function loopSwitch2() {
      backsound2.volume.value = -5;
        if (backsound2.state == "started") {
            // Use the Tone.Transport to pause audio
            backsound2.loop = false
            backsound2.stop();
        } else if (backsound2.state == "stopped") {
            // Use the Tone.Transport to start again
            backsound.stop();
            backsound3.stop();
            backsound4.stop();
            backsound5.stop();
            backsound2.loop = true
            backsound2.start();
    }}

    function loopSwitch3() {
      backsound3.volume.value = -5;
        if (backsound3.state == "started") {
            // Use the Tone.Transport to pause audio
            backsound3.loop = false
            backsound3.stop();
        } else if (backsound3.state == "stopped") {
            // Use the Tone.Transport to start again
            backsound.stop();
            backsound2.stop();
            backsound4.stop();
            backsound5.stop();
            backsound3.loop = true
            backsound3.start();
    }}

    function loopSwitch4() {
      backsound4.volume.value = -5;
        if (backsound4.state == "started") {
            // Use the Tone.Transport to pause audio
            backsound4.loop = false
            backsound4.stop();
        } else if (backsound4.state == "stopped") {
            // Use the Tone.Transport to start again
            backsound.stop();
            backsound2.stop();
            backsound3.stop();
            backsound5.stop();
            backsound4.loop = true
            backsound4.start();
    }}

    function loopSwitch5() {
      backsound4.volume.value = -5;
        if (backsound5.state == "started") {
            // Use the Tone.Transport to pause audio
            backsound5.loop = false
            backsound5.stop();
        } else if (backsound5.state == "stopped") {
            // Use the Tone.Transport to start again
            backsound.stop();
            backsound2.stop();
            backsound3.stop();
            backsound4.stop();
            backsound5.loop = true
            backsound5.start();
    }}

    // add in touch events for keyboard
    
    const domEvents = new THREEx.DomEvents(camera, renderer.domElement)

    var yDown, sDown, lDown, eDown, zDown

    domEvents.addEventListener(yButton, 'touchstart', event => {
      yDown = true
    });

    domEvents.addEventListener(sButton, 'touchstart', event => {
      sDown = true
    });

    domEvents.addEventListener(lButton, 'touchstart', event => {
      lDown = true
    });

    domEvents.addEventListener(eButton, 'touchstart', event => {
      eDown = true
    });

    domEvents.addEventListener(zButton, 'touchstart', event => {
      zDown = true
    });

    vrKeyboard.addEventListener("keydown", event => {
      if(event.code == "y"){yDown = true}
      if(event.code == "s"){sDown = true}
      if(event.code == "l"){lDown = true}
      if(event.code == "e"){eDown = true}
      if(event.code == "z"){zDown = true}
    })

     // add in mouse events for sound objects
    
    domEvents.addEventListener(sun, 'click', event => {
      loopSwitch();
    })

    domEvents.addEventListener(sun2, 'click', event => {
      loopSwitch2();
    })

    domEvents.addEventListener(sun, 'touchstart', event => {
      loopSwitch();
      sun.material.color.setHex( 0xffffff );
      setTimeout(function () {
          sun.material.color.setHex( 0x000000 );
      }, 200);
    });

    domEvents.addEventListener(sun2, 'touchstart', event => {
      loopSwitch2();
      sun2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          sun2.material.color.setHex( 0x000000 );
      }, 200);
    });

    domEvents.addEventListener(sun, 'mouseover', event => {
      sun.material.color.setHex( 0xffffff );
    })

    domEvents.addEventListener(sun, 'mouseout', event => {
      sun.material.color.setHex( 0x000000 );
    })

    domEvents.addEventListener(sun2, 'mouseover', event => {
      sun2.material.color.setHex( 0xffffff );
    })

    domEvents.addEventListener(sun2, 'mouseout', event => {
      sun2.material.color.setHex( 0x000000 );
    })

    domEvents.addEventListener(xanthar, 'click', event => {
      loopSwitch5();
    })

    domEvents.addEventListener(xanthar, 'touchstart', event => {
      loopSwitch5();
      xanthar.material.color.setHex( 0xffffff );
      setTimeout(function () {
          xanthar.material.color.setHex( 0x000000 );
      }, 200);
    });

    domEvents.addEventListener(xanthar, 'mouseover', event => {
      xanthar.material.color.setHex( 0xffffff );
    })

    domEvents.addEventListener(xanthar, 'mouseout', event => {
      xanthar.material.color.setHex( 0x000000 );
    })

    domEvents.addEventListener(mercury, 'click', event => {
      adlib.start();
    })

    domEvents.addEventListener(mercury, 'touchstart', event => {
      adlib.start();
      mercury.scale.set(3,3,3)
      mercury.material.color.setHex( 0xffffff );
      setTimeout(function () {
          mercury.scale.set(1,1,1)
          mercury.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 49) {
        adlib.start();
      }
    });

    domEvents.addEventListener(mercury, 'mouseover', event => {
      mercury.scale.set(3,3,3)
      mercury.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(mercury, 'mouseout', event => {
      mercury.scale.set(1,1,1)
      mercury.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(mercury2, 'click', event => {
      adlib11.start();
    })

    domEvents.addEventListener(mercury2, 'touchstart', event => {
      adlib11.start();
      mercury2.scale.set(3,3,3)
      mercury2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          mercury2.scale.set(1,1,1)
          mercury2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 50) {
        adlib11.start();
      }
    });

    domEvents.addEventListener(mercury2, 'mouseover', event => {
      mercury2.scale.set(3,3,3)
      mercury2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(mercury2, 'mouseout', event => {
      mercury2.scale.set(1,1,1)
      mercury2.material.color.setHex( 0x8b0000 );
    })
    
    domEvents.addEventListener(moon, 'click', event => {
      adlib2.start();
    })

    domEvents.addEventListener(moon, 'touchstart', event => {
      adlib2.start();
      moon.scale.set(3,3,3)
      moon.material.color.setHex( 0xffffff );
      setTimeout(function () {
          moon.scale.set(1,1,1)
          moon.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 51) {
        adlib2.start();
      }
    });

    domEvents.addEventListener(moon, 'mouseover', event => {
      moon.scale.set(3,3,3)
      moon.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(moon, 'mouseout', event => {
      moon.scale.set(1,1,1)
      moon.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(moon2, 'click', event => {
      adlib12.start();
    })

    domEvents.addEventListener(moon2, 'touchstart', event => {
      adlib12.start();
      moon2.scale.set(3,3,3)
      moon2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          moon2.scale.set(1,1,1)
          moon2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 51) {
        adlib12.start();
      }
    });

    domEvents.addEventListener(moon2, 'mouseover', event => {
      moon2.scale.set(3,3,3)
      moon2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(moon2, 'mouseout', event => {
      moon2.scale.set(1,1,1)
      moon2.material.color.setHex( 0x8b0000 );
    })
    
    domEvents.addEventListener(mars, 'click', event => {
      adlib3.start();
    })
    
    domEvents.addEventListener(mars, 'touchstart', event => {
      adlib3.start();
      mars.scale.set(3,3,3)
      mars.material.color.setHex( 0xffffff );
      setTimeout(function () {
          mars.scale.set(1,1,1)
          mars.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 52) {
        adlib3.start();
      }
    });

    domEvents.addEventListener(mars, 'mouseover', event => {
      mars.scale.set(3,3,3)
      mars.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(mars, 'mouseout', event => {
      mars.scale.set(1,1,1)
      mars.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(mars2, 'click', event => {
      adlib13.start();
    })

    domEvents.addEventListener(mars2, 'touchstart', event => {
      adlib13.start();
      mars2.scale.set(3,3,3)
      mars2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          mars2.scale.set(1,1,1)
          mars2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 53) {
        adlib13.start();
      }
    });

    domEvents.addEventListener(mars2, 'mouseover', event => {
      mars2.scale.set(3,3,3)
      mars2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(mars2, 'mouseout', event => {
      mars2.scale.set(1,1,1)
      mars2.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(neptune, 'click', event => {
      adlib4.start();
    })

    domEvents.addEventListener(neptune, 'touchstart', event => {
      adlib4.start();
      neptune.scale.set(3,3,3)
      neptune.material.color.setHex( 0xffffff );
      setTimeout(function () {
          neptune.scale.set(1,1,1)
          neptune.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 54) {
        adlib4.start();
      }
    });

    domEvents.addEventListener(neptune, 'mouseover', event => {
      neptune.scale.set(3,3,3)
      neptune.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(neptune, 'mouseout', event => {
      neptune.scale.set(1,1,1)
      neptune.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(neptune2, 'click', event => {
      adlib14.start();
    })

    domEvents.addEventListener(neptune2, 'touchstart', event => {
      adlib14.start();
      neptune2.scale.set(3,3,3)
      neptune2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          neptune2.scale.set(1,1,1)
          neptune2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 55) {
        adlib14.start();
      }
    });

    domEvents.addEventListener(neptune2, 'mouseover', event => {
      neptune2.scale.set(3,3,3)
      neptune2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(neptune2, 'mouseout', event => {
      neptune2.scale.set(1,1,1)
      neptune2.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(uranus, 'click', event => {
      adlib5.start();
    })

    domEvents.addEventListener(uranus, 'touchstart', event => {
      adlib5.start();
      uranus.scale.set(3,3,3)
      uranus.material.color.setHex( 0xffffff );
      setTimeout(function () {
          uranus.scale.set(1,1,1)
          uranus.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 56) {
        adlib5.start();
      }
    });

    domEvents.addEventListener(uranus, 'mouseover', event => {
      uranus.scale.set(3,3,3)
      uranus.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(uranus, 'mouseout', event => {
      uranus.scale.set(1,1,1)
      uranus.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(uranus2, 'click', event => {
      adlib15.start();
    })

    domEvents.addEventListener(uranus2, 'touchstart', event => {
      adlib15.start();
      uranus2.scale.set(3,3,3)
      uranus2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          uranus2.scale.set(1,1,1)
          uranus2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 57) {
        adlib15.start();
      }
    });

    domEvents.addEventListener(uranus2, 'mouseover', event => {
      uranus2.scale.set(3,3,3)
      uranus2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(uranus2, 'mouseout', event => {
      uranus2.scale.set(1,1,1)
      uranus2.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(saturn, 'click', event => {
      adlib6.start();
    })

    domEvents.addEventListener(saturn, 'touchstart', event => {
      adlib6.start();
      saturn.scale.set(3,3,3)
      saturn.material.color.setHex( 0xffffff );
      setTimeout(function () {
          saturn.scale.set(1,1,1)
          saturn.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    document.addEventListener("keydown", event => {
      if (event.keyCode === 48) {
        adlib6.start();
      }
    });

    domEvents.addEventListener(saturn, 'mouseover', event => {
      saturn.scale.set(3,3,3)
      saturn.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(saturn, 'mouseout', event => {
      saturn.scale.set(1,1,1)
      saturn.material.color.setHex( 0x8b0000 );
    })
    
    domEvents.addEventListener(saturn2, 'click', event => {
      adlib16.start();
    })

    domEvents.addEventListener(saturn2, 'touchstart', event => {
      adlib16.start();
      saturn2.scale.set(3,3,3)
      saturn2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          saturn2.scale.set(1,1,1)
          saturn2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    domEvents.addEventListener(saturn2, 'mouseover', event => {
      saturn2.scale.set(3,3,3)
      saturn2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(saturn2, 'mouseout', event => {
      saturn2.scale.set(1,1,1)
      saturn2.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(pluto, 'click', event => {
      adlib17.start();
    })

    domEvents.addEventListener(pluto, 'touchstart', event => {
      adlib17.start();
      pluto.scale.set(3,3,3)
      pluto.material.color.setHex( 0xffffff );
      setTimeout(function () {
          pluto.scale.set(1,1,1)
          pluto.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    domEvents.addEventListener(pluto, 'mouseover', event => {
      pluto.scale.set(3,3,3)
      pluto.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(pluto, 'mouseout', event => {
      pluto.scale.set(1,1,1)
      pluto.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(pluto2, 'click', event => {
      adlib7.start();
    })

    domEvents.addEventListener(pluto2, 'touchstart', event => {
      adlib7.start();
      pluto2.scale.set(3,3,3)
      pluto2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          pluto2.scale.set(1,1,1)
          pluto2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    domEvents.addEventListener(pluto2, 'mouseover', event => {
      pluto2.scale.set(3,3,3)
      pluto2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(pluto2, 'mouseout', event => {
      pluto2.scale.set(1,1,1)
      pluto2.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(venus, 'click', event => {
      adlib8.start();
    })

    domEvents.addEventListener(venus, 'touchstart', event => {
      adlib8.start();
      venus.scale.set(3,3,3)
      venus.material.color.setHex( 0xffffff );
      setTimeout(function () {
          venus.scale.set(1,1,1)
          venus.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    domEvents.addEventListener(venus, 'mouseover', event => {
      venus.scale.set(3,3,3)
      venus.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(venus, 'mouseout', event => {
      venus.scale.set(1,1,1)
      venus.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(venus2, 'click', event => {
      adlib18.start();
    })

    domEvents.addEventListener(venus2, 'touchstart', event => {
      adlib18.start();
      venus2.scale.set(3,3,3)
      venus2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          venus2.scale.set(1,1,1)
          venus2.material.color.setHex( 0x8b0000 );
      }, 200);
    })

    domEvents.addEventListener(venus2, 'mouseover', event => {
      venus2.scale.set(3,3,3)
      venus2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(venus2, 'mouseout', event => {
      venus2.scale.set(1,1,1)
      venus2.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(jupiter, 'touchstart', event => {
      adlib9.start();
      jupiter.scale.set(3,3,3)
      jupiter.material.color.setHex( 0xffffff );
      setTimeout(function () {
          jupiter.scale.set(1,1,1)
          jupiter.material.color.setHex( 0x8b0000 );
      }, 200);
    })
    
    domEvents.addEventListener(jupiter, 'click', event => {
      adlib9.start();
    })

    domEvents.addEventListener(jupiter, 'mouseover', event => {
      jupiter.scale.set(3,3,3)
      jupiter.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(jupiter, 'mouseout', event => {
      jupiter.scale.set(1,1,1)
      jupiter.material.color.setHex( 0x8b0000 );
    })

    domEvents.addEventListener(jupiter2, 'click', event => {
      adlib10.start();
    })

    domEvents.addEventListener(jupiter2, 'touchstart', event => {
      adlib10.start();
      jupiter2.scale.set(3,3,3)
      jupiter2.material.color.setHex( 0xffffff );
      setTimeout(function () {
          jupiter2.scale.set(1,1,1)
          jupiter2.material.color.setHex( 0x8b0000 );
      }, 200);
    })
    
    domEvents.addEventListener(jupiter2, 'mouseover', event => {
      jupiter2.scale.set(3,3,3)
      jupiter2.material.color.setHex( 0xFFFFFF );
    })

    domEvents.addEventListener(jupiter2, 'mouseout', event => {
      jupiter2.scale.set(1,1,1)
      jupiter2.material.color.setHex( 0x8b0000 );
    })
    
    // pause screen & pause audio 

    var inPlay = true

    document.addEventListener("keydown", event => {
      if (event.keyCode === 32) {
        if(Tone.Master.mute){
          Tone.Master.mute = false
          }else{
          Tone.Master.mute = true
        }
        if(inPlay){
        instructions.style.visibility = 'visible';
        blocker.style.visibility = 'visible';
        pause.style.display = 'block';
        inPlay = false
        }else{
        instructions.style.visibility = 'hidden';
        blocker.style.visibility = 'hidden';
        pause.style.display = 'none';
        inPlay = true
        }
      }
    });

    // pause audio if you leave the tab

    document.addEventListener("visibilitychange", function() {
    if (document.hidden){
        Tone.Master.mute = true;
    } else {
        Tone.Master.mute = false;
    }
    });
    
    // create object events

    var animateY = false
    var animateS = false
    var animateL = false

    function ezSound(){
      mercury.position.set(0,300,1100)
      moon.position.set(180,300,1100)
      mars.position.set(-200,300,1100)
      neptune.position.set(0,750,1100)
      uranus.position.set(180,750,1100)
      saturn.position.set(-200,750,1100)
      pluto.position.set(0,1000,1100)
      jupiter.position.set(400,300,1100)
      venus.position.set(-400,300,1100)
      mercury2.position.set(0,200,-1200)
      moon2.position.set(200,200,-1200)
      mars2.position.set(-215,200,-1200)
      neptune2.position.set(0,1000,-1200)
      uranus2.position.set(260,500,-1200)
      saturn2.position.set(-280,500,-1200)
      pluto2.position.set(0,520,-1200)
      jupiter2.position.set(410,200,-1200)
      venus2.position.set(-410,200,-1200)
    }

    document.addEventListener("click", event => {
      if(yDown){
      young.scale.set(5000,5000,5000),
      young.position.set(-2500,3000,0),
      animateY = true
      }
      if(sDown){
      stoner.scale.set(5000,5000,5000),
      stoner.position.set(0,4600,0),
      animateS = true
      }
      if(lDown){
      life.scale.set(5000,5000,5000),
      life.position.set(2500,3000,0),
      animateL = true
      }
      if(eDown && zDown){
        ezSound();
      }
    });

    if(isMobileDevice){
      document.addEventListener("touchstart", event => {
        if(yDown){
        young.scale.set(5000,5000,5000),
        young.position.set(-2500,3000,0),
        animateY = true
        }
        if(sDown){
        stoner.scale.set(5000,5000,5000),
        stoner.position.set(0,4600,0),
        animateS = true
        }
        if(lDown){
        life.scale.set(5000,5000,5000),
        life.position.set(2500,3000,0),
        animateL = true
        }
        if(eDown && zDown){
          ezSound();
        }
      });
    }

    document.addEventListener("keydown", event => {
      if (event.keyCode === 89) {
        return young.scale.set(5000,5000,5000),
        young.position.set(-2500,3000,0),
        animateY = true
      }
    });

    document.addEventListener("keydown", event => {
      if (event.keyCode === 83) {
        return stoner.scale.set(5000,5000,5000),
        stoner.position.set(0,4600,0),
        animateS = true
      }
    });

    document.addEventListener("keydown", event => {
      if (event.keyCode === 76) {
        return life.scale.set(5000,5000,5000),
        life.position.set(2500,3000,0),
        animateL = true
      }
    });

    document.addEventListener("keydown", event => {
      if (event.keyCode === 69) {
        eDown = true
      }
    });

    document.addEventListener("keydown", event => {
      if (event.keyCode === 90) {
        zDown = true
        if(zDown && eDown){
          ezSound();
        }
      }
    });

    // create animation

    var isExecuted = false

    const animate = () => {
      if(animateY&&animateS&&animateL){
        young.rotation.y += 0.01;
        stoner.rotation.y += 0.01;
        life.rotation.y += 0.01;
        young.scale.y = 15000;
        young.scale.x = 15000;
        young.scale.z = 15000;
        stoner.scale.y = 15000;
        stoner.scale.x = 15000;
        stoner.scale.z = 15000;
        life.scale.y = 15000;
        life.scale.x = 15000;
        life.scale.z = 15000;
        snake1.rotation.y -= 0.01;
        snake2.rotation.y += 0.01;
        spider.rotation.y += 0.300;
        particleGroup.scale.x += 0.01;
        particleGroup.scale.y += 0.01;
        particleGroup.scale.z += 0.01;
        particleGroup2.scale.x += 0.01;
        particleGroup2.scale.y += 0.01;
        particleGroup2.scale.z += 0.01;
        scene.fog = new THREE.Fog( 0xff0000, 0, 17000 );
      }
      if(animateY&&animateS&&animateL&&!isExecuted){
        loopSwitch3();
        isExecuted = true;
      }
      if(mobileConfirm){
        var vector = new THREE.Vector3(controls.mouse.x, controls.mouse.y, 1);
        vector.unproject(camera);
      }
      controls.update(clock.getDelta());
      vrKeyboard.update();
      scene.simulate();
      particleUpdate();
      particleUpdate2();
      camera.position.x = Math.min(4998, Math.max(-4998, camera.position.x))
      camera.position.z = Math.min(4998, Math.max(-4998, camera.position.z))
      camera.position.y = Math.min(200, Math.max(200, camera.position.y))
      renderer.render(scene, camera)
      requestAnimationFrame(animate)
      }
      animate()
  </script>
</body>
</html>